# Workflow State & Rules (STM + Rules + Log)
*This file contains the dynamic state, embedded rules, active plan, and log for the current session.*
*It is read and updated frequently by the AI during its operational loop.*
---
## State
*Holds the current status of the workflow.*
```yaml
Phase: VALIDATE # Current workflow phase (ANALYZE, BLUEPRINT, CONSTRUCT, VALIDATE, BLUEPRINT_REVISE)
Status: COMPLETED # Current status (READY, IN_PROGRESS, BLOCKED_*, NEEDS_*, COMPLETED, COMPLETED_ITERATION)
CurrentTaskID: EnhanceLandingPageUI # Identifier for the main task being worked on
CurrentStep: P3.5 # Identifier for the specific step in the plan being executed
CurrentItem: null # Identifier for the item currently being processed in iteration
```
---
## Plan
*Contains the step-by-step implementation plan generated by AI during the BLUEPRINT phase.*
**Task: EnhanceLandingPageUI**

**Overall Strategy:** Iteratively enhance each section of the landing page (`app/page.tsx`). For each section, the process will involve content enrichment, modern styling overhaul, and adding animations/transitions. We'll assume the use of Tailwind CSS for styling and Framer Motion for animations, common in Next.js projects. If these are not the intended tools, please clarify.

**Phase 1: Setup & Global Enhancements**
1.  **P1.1: Review Existing Codebase:**
    *   Thoroughly examine `app/page.tsx` and each imported component (`HeroSection`, `ServicesSection`, `HowItWorksSection`, `TestimonialsSection`, `FooterCTASection`).
    *   Analyze current styling, structure, and content.
    *   Identify any existing animation/transition libraries or patterns.
2.  **P1.2: Define Design Language & Animation Style (Conceptual):**
    *   Establish a modern, cohesive design language (e.g., color palette, typography, spacing, imagery style) that aligns with the "x110 fold" improvement goal. (This step is conceptual; user input/assets might be needed for specifics).
    *   Define a general style for animations/transitions (e.g., subtle fades, slide-ins, parallax effects).
3.  **P1.3: Setup Dependencies (if needed):**
    *   If not already present, add `tailwindcss` and `framer-motion` to the project.
    *   Configure `tailwind.config.js` according to the new design language (colors, fonts, etc.).

**Phase 2: Component-by-Component Enhancement**
*(Repeat steps 2.1-2.5 for each component: `HeroSection`, `ServicesSection`, `HowItWorksSection`, `TestimonialsSection`, `FooterCTASection`)*

*   **For `HeroSection`:**
    *   **P2.1.1 (Content):** Review and expand content. This might include a more impactful headline, a compelling subheading, revised/new imagery/video, and clearer call-to-action (CTA) text.
    *   **P2.1.2 (Styling):** Re-implement styling using Tailwind CSS according to the new design language. Focus on layout, typography, color, and responsiveness.
    *   **P2.1.3 (Animations):** Implement animations (e.g., text appearing on scroll, background effects, animated CTAs) using Framer Motion.
    *   **P2.1.4 (Testing):** Test responsiveness and animations across different screen sizes. Log completion.

*   **For `ServicesSection`:**
    *   **P2.2.1 (Content):** Enhance descriptions of services. Add icons or illustrative graphics for each service. Consider adding more service items if appropriate.
    *   **P2.2.2 (Styling):** Apply new Tailwind CSS styles. Improve card layouts, iconography, and overall visual appeal.
    *   **P2.2.3 (Animations):** Add animations for service cards (e.g., on hover, on scroll into view).
    *   **P2.2.4 (Testing):** Test responsiveness and animations. Log completion.

*   **For `HowItWorksSection`:**
    *   **P2.3.1 (Content):** Clarify and expand the steps. Use more engaging language and visuals (e.g., diagrams, step-by-step illustrations).
    *   **P2.3.2 (Styling):** Re-style with Tailwind CSS. Focus on clear visual hierarchy for the steps.
    *   **P2.3.3 (Animations):** Animate the appearance of each step or use transitions to guide the user through the process.
    *   **P2.3.4 (Testing):** Test responsiveness and animations. Log completion.

*   **For `TestimonialsSection`:**
    *   **P2.4.1 (Content):** Add more testimonials if available. Include photos or avatars of reviewers for authenticity. Ensure attributions are clear.
    *   **P2.4.2 (Styling):** Modernize the look of testimonial cards/quotes using Tailwind CSS. Consider a carousel or slider for multiple testimonials.
    *   **P2.4.3 (Animations):** Implement smooth transitions for testimonial sliders or animations for individual testimonial entries.
    *   **P2.4.4 (Testing):** Test responsiveness and animations. Log completion.

*   **For `FooterCTASection`:**
    *   **P2.5.1 (Content):** Refine the call to action. Ensure contact information or next steps are prominent and easy to understand.
    *   **P2.5.2 (Styling):** Re-style the footer and CTA elements using Tailwind CSS for a strong concluding visual.
    *   **P2.5.3 (Animations):** Add subtle animations to CTA buttons or elements to draw attention.
    *   **P2.5.4 (Testing):** Test responsiveness and animations. Log completion.

**Phase 3: Final Review & Validation**
1.  **P3.1: Global Styles & Consistency Check:** Review `app/globals.css` and ensure all components adhere to the defined design language and animation style. Check for overall visual consistency.
2.  **P3.2: Performance Check:** Assess loading times and animation smoothness. Optimize images and code where necessary.
3.  **P3.3: Cross-Browser & Cross-Device Testing:** Perform thorough testing on major browsers and various device sizes.
4.  **P3.4: Accessibility (A11y) Check:** Ensure basic accessibility standards are met (e.g., keyboard navigation, sufficient color contrast, alt text for images).
5.  **P3.5: Code Linting & Formatting:** Run linters and formatters on all changed files.
---
## Rules
*Embedded rules governing the AI's autonomous operation.*
**# --- Core Workflow Rules ---**
RULE_WF_PHASE_ANALYZE:
  **Constraint:** Goal is understanding request/context. NO solutioning or implementation planning.
RULE_WF_PHASE_BLUEPRINT:
  **Constraint:** Goal is creating a detailed, unambiguous step-by-step plan. NO code implementation.
RULE_WF_PHASE_CONSTRUCT:
  **Constraint:** Goal is executing the `## Plan` exactly. NO deviation. If issues arise, trigger error handling or revert phase.
RULE_WF_PHASE_VALIDATE:
  **Constraint:** Goal is verifying implementation against `## Plan` and requirements using tools. NO new implementation.
RULE_WF_TRANSITION_01:
  **Trigger:** Explicit user command (`@analyze`, `@blueprint`, `@construct`, `@validate`).
  **Action:** Update `State.Phase` accordingly. Log phase change.
RULE_WF_TRANSITION_02:
  **Trigger:** AI determines current phase constraint prevents fulfilling user request OR error handling dictates phase change (e.g., RULE_ERR_HANDLE_TEST_01).
  **Action:** Log the reason. Update `State.Phase` (e.g., to `BLUEPRINT_REVISE`). Set `State.Status` appropriately (e.g., `NEEDS_PLAN_APPROVAL`). Report to user.
RULE_ITERATE_01: # Triggered by RULE_MEM_READ_STM_01 when State.Status == READY and State.CurrentItem == null, or after VALIDATE phase completion.
  **Trigger:** `State.Status == READY` and `State.CurrentItem == null` OR after `VALIDATE` phase completion.
  **Action:**
    1. Check `## Items` section for more items.
    2. If more items:
    3. Set `State.CurrentItem` to the next item.
    4. Clear `## Log`.
    5. Set `State.Phase = ANALYZE`, `State.Status = READY`.
    6. Log "Starting processing item [State.CurrentItem]".
    7. If no more items:
    8. Trigger `RULE_ITERATE_02`.
RULE_ITERATE_02:
  **Trigger:** `RULE_ITERATE_01` determines no more items.
  **Action:**
    1. Set `State.Status = COMPLETED_ITERATION`.
    2. Log "Tokenization iteration completed."
**# --- Initialization & Resumption Rules ---**
RULE_INIT_01:
  **Trigger:** AI session/task starts AND `workflow_state.md` is missing or empty.
  **Action:**
    1. Create `workflow_state.md` with default structure.
    2. Read `project_config.md` (prompt user if missing).
    3. Set `State.Phase = ANALYZE`, `State.Status = READY`.
    4. Log "Initialized new session."
    5. Prompt user for the first task.
RULE_INIT_02:
  **Trigger:** AI session/task starts AND `workflow_state.md` exists.
  **Action:**
    1. Read `project_config.md`.
    2. Read existing `workflow_state.md`.
    3. Log "Resumed session."
    4. Check `State.Status`: Handle READY, COMPLETED, BLOCKED_*, NEEDS_*, IN_PROGRESS appropriately (prompt user or report status).
RULE_INIT_03:
  **Trigger:** User confirms continuation via RULE_INIT_02 (for IN_PROGRESS state).
  **Action:** Proceed with the next action based on loaded state and rules.
**# --- Memory Management Rules ---**
RULE_MEM_READ_LTM_01:
  **Trigger:** Start of a new major task or phase.
  **Action:** Read `project_config.md`. Log action.
RULE_MEM_READ_STM_01:
  **Trigger:** Before *every* decision/action cycle.
  **Action:**
    1. Read `workflow_state.md`.
    2. If `State.Status == READY` and `State.CurrentItem == null`:
    3. Log "Attempting to trigger RULE_ITERATE_01".
    4. Trigger `RULE_ITERATE_01`.
RULE_MEM_UPDATE_STM_01:
  **Trigger:** After *every* significant action or information receipt.
  **Action:** Immediately update relevant sections (`## State`, `## Plan`, `## Log`) in `workflow_state.md` and save.
RULE_MEM_UPDATE_LTM_01:
  **Trigger:** User command (`@config/update`) OR end of successful VALIDATE phase for significant change.
  **Action:** Propose concise updates to `project_config.md` based on `## Log`/diffs. Set `State.Status = NEEDS_LTM_APPROVAL`. Await user confirmation.
RULE_MEM_VALIDATE_01:
  **Trigger:** After updating `workflow_state.md` or `project_config.md`.
  **Action:** Perform internal consistency check. If issues found, log and set `State.Status = NEEDS_CLARIFICATION`.
**# --- Tool Integration Rules (Cursor Environment) ---**
RULE_TOOL_LINT_01:
  **Trigger:** Relevant source file saved during CONSTRUCT phase.
  **Action:** Instruct Cursor terminal to run lint command. Log attempt. On completion, parse output, log result, set `State.Status = BLOCKED_LINT` if errors.
RULE_TOOL_FORMAT_01:
  **Trigger:** Relevant source file saved during CONSTRUCT phase.
  **Action:** Instruct Cursor to apply formatter or run format command via terminal. Log attempt.
RULE_TOOL_TEST_RUN_01:
  **Trigger:** Command `@validate` or entering VALIDATE phase.
  **Action:** Instruct Cursor terminal to run test suite. Log attempt. On completion, parse output, log result, set `State.Status = BLOCKED_TEST` if failures, `TESTS_PASSED` if success.
RULE_TOOL_APPLY_CODE_01:
  **Trigger:** AI determines code change needed per `## Plan` during CONSTRUCT phase.
RULE_PROCESS_ITEM_01:
  **Trigger:** `State.Phase == CONSTRUCT` and `State.CurrentItem` is not null and current step in `## Plan` requires item processing.
  **Action:**
    1. **Get Item Text:** Based on `State.CurrentItem`, extract the corresponding 'Text to Tokenize' from the `## Items` section.
    2. **Summarize (Placeholder):**  Use a placeholder to generate a summary of the extracted text.  For example, "Summary of [text] is [placeholder summary]".
    3. **Estimate Token Count:**
       a. Read `Characters Per Token (Estimate)` from `project_config.md`.
       b. Get the text content of the item from the `## Items` section. (Placeholder: Implement logic to extract text based on `State.CurrentItem` from the `## Items` table.)
       c. Calculate `estimated_tokens = length(text_content) / 4`.
    4. **Summarize (Placeholder):** Use a placeholder to generate a summary of the extracted text.  For example, "Summary of [text] is [placeholder summary]". (Placeholder: Replace with actual summarization tool/logic)
    5. **Store Results:** Append a new row to the `## TokenizationResults` table with:
       *   `Item ID`: `State.CurrentItem`
       *   `Summary`: The generated summary. (Placeholder: Implement logic to store the summary.)
       *   `Token Count`: `estimated_tokens`.
    6. Log the processing actions, results, and estimated token count to the `## Log`. (Placeholder: Implement logging.)
  **Action:** Generate modification. Instruct Cursor to apply it. Log action.
**# --- Error Handling & Recovery Rules ---**
RULE_ERR_HANDLE_LINT_01:
  **Trigger:** `State.Status` is `BLOCKED_LINT`.
  **Action:** Analyze error in `## Log`. Attempt auto-fix if simple/confident. Apply fix via RULE_TOOL_APPLY_CODE_01. Re-run lint via RULE_TOOL_LINT_01. If success, reset `State.Status`. If fail/complex, set `State.Status = BLOCKED_LINT_UNRESOLVED`, report to user.
RULE_ERR_HANDLE_TEST_01:
  **Trigger:** `State.Status` is `BLOCKED_TEST`.
  **Action:** Analyze failure in `## Log`. Attempt auto-fix if simple/localized/confident. Apply fix via RULE_TOOL_APPLY_CODE_01. Re-run failed test(s) or suite via RULE_TOOL_TEST_RUN_01. If success, reset `State.Status`. If fail/complex, set `State.Phase = BLUEPRINT_REVISE`, `State.Status = NEEDS_PLAN_APPROVAL`, propose revised `## Plan` based on failure analysis, report to user.
RULE_ERR_HANDLE_GENERAL_01:
  **Trigger:** Unexpected error or ambiguity.
  **Action:** Log error/situation to `## Log`. Set `State.Status = BLOCKED_UNKNOWN`. Report to user, request instructions.
---
## Log
*A chronological log of significant actions, events, tool outputs, and decisions.*
*(This section will be populated by the AI during operation)*
*Example:*
*   `[2025-03-26 17:55:00] Initialized new session.`
*   `[2025-03-26 17:55:15] User task: Implement login feature.`
*   `[2025-03-26 17:55:20] State.Phase changed to ANALYZE.`
*   `[2025-03-26 17:56:00] Read project_config.md.`
*   ...
*Actual Log:*
*   `[2025-03-26 17:53:47] Initialized new session. State set to ANALYZE/READY.`
*   `[2025-03-27 10:00:00] Project goal identified from project_config.md. Transitioning to BLUEPRINT phase for task: EnhanceLandingPageUI. Old plan and items cleared.`
*   `[2025-03-27 10:05:00] Plan for EnhanceLandingPageUI approved by user. Transitioning to CONSTRUCT phase. Starting step P1.1.`
*   `[2025-03-27 10:10:00] Completed P1.1: Reviewed app/page.tsx, all imported components (Hero, Services, HowItWorks, Testimonials, FooterCTA) and globals.css. Existing structure uses CSS Modules with some Tailwind setup in globals.css. Basic CSS transitions present, no complex animation library. Noted P1.2 conceptual design/animation considerations.`
*   `[2025-03-27 10:15:00] Completed P1.3: Installed framer-motion. Tailwind.config.js to be revisited during component styling.`
*   `[2025-03-27 10:20:00] Completed P2.1.1 (HeroSection Content): Updated headline, intro text, and CTA button text.`
*   `[2025-03-27 10:25:00] Completed P2.1.2 (HeroSection Styling) & P2.1.3 (HeroSection Animations): Refactored HeroSection.tsx to use Tailwind CSS and Framer Motion, added animated decorative blobs, and deleted HeroSection.module.css. Added blob animation keyframes to globals.css. P2.1.4 (Testing) needs manual verification.`
*   `[2025-03-27 10:30:00] Completed P2.2.1 (ServicesSection Content): Updated subheading, titles, descriptions for 4 features, added 2 new features. Noted icon placeholders to be replaced.`
*   `[2025-03-27 10:35:00] Completed P2.2.2 (ServicesSection Styling) & P2.2.3 (ServicesSection Animations): Installed @heroicons/react. Refactored ServicesSection.tsx to use Tailwind CSS, Framer Motion, and Heroicons. Deleted ServicesSection.module.css. P2.2.4 (Testing) needs manual verification.`
*   `[2025-03-27 10:40:00] Completed P2.3.1 (HowItWorksSection Content): Updated section title, subheading, and step titles/descriptions. Fixed linter error.`
*   `[2025-03-27 10:45:00] Completed P2.3.2 (HowItWorksSection Styling) & P2.3.3 (HowItWorksSection Animations): Refactored HowItWorksSection.tsx to use Tailwind CSS, Framer Motion, and Heroicons. Updated StepCard to include icons and numbers. Deleted HowItWorksSection.module.css. P2.3.4 (Testing) needs manual verification.`
*   `[2025-03-27 10:50:00] Completed P2.4.1 (TestimonialsSection Content): Added subheading and two new testimonials. Fixed linter error for apostrophe.`
*   `[2025-03-27 10:55:00] Completed P2.4.2 (TestimonialsSection Styling) & P2.4.3 (TestimonialsSection Animations): Refactored TestimonialsSection.tsx to use Tailwind CSS, Framer Motion, and Heroicons. Updated TestimonialCard styling and added avatar logic. Deleted TestimonialsSection.module.css. P2.4.4 (Testing) needs manual verification.`
*   `[2025-03-27 11:00:00] Completed P2.5.1 (FooterCTASection Content): Updated title, sub-text, button text, and added social media placeholders.`
*   `[2025-03-27 11:05:00] Completed P2.5.2 (FooterCTASection Styling) & P2.5.3 (FooterCTASection Animations): Refactored FooterCTASection.tsx to use Tailwind CSS, Framer Motion, and lucide-react icons. Added "use client". Deleted FooterCTASection.module.css. P2.5.4 (Testing) needs manual verification.`
*   `[2025-03-27 11:10:00] Added "use client" to HeroSection, ServicesSection, HowItWorksSection, TestimonialsSection to resolve framer-motion client boundary errors.`
*   `[2025-03-27 11:15:00] Completed P3.1 (Global Styles & Consistency Check): Verified Tailwind config and overall consistency. P3.2-P3.4 require manual testing.`
*   `[2025-03-27 11:20:00] Completed P3.5 (Code Linting): Resolved next/image warning in TestimonialsSection. Other lint warnings are out of scope for current task. Landing page component refactoring complete.`
---
## Items
*This section will contain the list of items to be processed.*
*(This section is not applicable for the current task: EnhanceLandingPageUI)*
---
